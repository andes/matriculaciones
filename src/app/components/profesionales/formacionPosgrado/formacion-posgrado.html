<br>
<plex-title titulo="Listado de posgrado" size="lg">
    <plex-button type="success" size="md" (click)="cargarPosgrado()"> AGREGAR POSGRADO</plex-button>
</plex-title>

<plex-table [columns]="columns" #table="plTable">
    <tr *ngFor="let formacionPosgrado of profesional.formacionPosgrado; let i = index;" (click)="showPosgrado(i)">
        <td>
            <plex-label icon="estetoscopio" type="info" case="capitalize" size="lg"
                        titulo="{{ formacionPosgrado.especialidad?.nombre }}"
                        subtitulo="Profesión: {{formacionPosgrado.profesion?.nombre}}">
            </plex-label>
        </td>
        <td>
            <plex-label size="lg"
                        titulo="Nro. {{formacionPosgrado.matriculacion[formacionPosgrado.matriculacion.length - 1].matriculaNumero}}"
                        subtitulo="{{formacionPosgrado.institucionFormadora?.nombre}}">
            </plex-label>
        </td>
        <td>
            <plex-badge size="lg" type="info">
                {{formacionPosgrado.fechasDeAltas[formacionPosgrado.fechasDeAltas.length - 1]?.fecha |
                date:'dd/MM/yyyy'}}</plex-badge>
        </td>
        <td class="column-right my-3">
            <plex-badge *ngIf="formacionPosgrado.matriculacion.length && !formacionPosgrado.revalida && formacionPosgrado.tieneVencimiento && hoy > formacionPosgrado.matriculacion[formacionPosgrado.matriculacion.length-1].fin"
                        type="{{((hoy.getTime() - formacionPosgrado.matriculacion[formacionPosgrado.matriculacion.length-1].fin.getTime())/(1000 * 3600 * 24) > 365)?'danger':'info'}}">
                {{((hoy.getTime() -
                formacionPosgrado.matriculacion[formacionPosgrado.matriculacion.length-1].fin.getTime())/(1000 *
                3600
                *24) > 365)?'Vencida':'Año de gracia'}}
            </plex-badge>

            <plex-badge *ngIf="formacionPosgrado.matriculacion.length && !formacionPosgrado.revalida && formacionPosgrado.tieneVencimiento &&
                formacionPosgrado.matriculado && hoy <= formacionPosgrado.matriculacion[formacionPosgrado.matriculacion.length-1].fin"
                        type="success"> vigente
            </plex-badge>

            <plex-badge *ngIf="formacionPosgrado.matriculacion.length && !formacionPosgrado.revalida && formacionPosgrado.tieneVencimiento && 
                !formacionPosgrado.matriculado" type="danger"> Suspendida
            </plex-badge>

            <plex-badge *ngIf='formacionPosgrado.matriculacion.length  && formacionPosgrado.revalida && formacionPosgrado.tieneVencimiento'
                        type="{{formacionPosgrado.papelesVerificados?'info':'warning'}}">
                {{formacionPosgrado.papelesVerificados?'Papeles verificados': 'Papeles sin verificar'}}
            </plex-badge>

            <plex-badge *ngIf='!formacionPosgrado.tieneVencimiento' type="warning">
                Sin vencimiento
            </plex-badge>

            <plex-badge *ngIf="formacionPosgrado.notas?.length" class='ml-2' type="info" size="md">
                <plex-icon name="documento" type="info" size="sm"></plex-icon>
            </plex-badge>
            <plex-dropdown icon="dots-vertical" size="sm" type="link" [right]="true" [items]="itemsDropdown"
                           (onOpen)="setDropDown(i)">
            </plex-dropdown>

        </td>
    </tr>
</plex-table>