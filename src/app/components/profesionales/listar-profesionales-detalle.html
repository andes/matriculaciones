<plex-box type="invert">
    <plex-title titulo="Detalle del profesional" size="md">
        <plex-button class='ml-2' size="sm" label="editar" type="warning" (click)="editarProfesional()">
        </plex-button>
        <plex-button class='ml-2' size="sm" icon="close" type="danger" (click)="volver()"></plex-button>
    </plex-title>

    <plex-detail size="md">
        <img *ngIf='tieneFoto' [src]="foto" class="img-circle" />
        <plex-badge size="lg" type="{{profesional.profesionalMatriculado?'success':'danger'}}">{{
            profesional.profesionalMatriculado?'MATRICULADO':'NO MATRICULADO' }}</plex-badge>
        <div title> {{ profesional.apellido + ', '+ profesional.nombre}} </div>
        <div subtitle> {{ profesional.documento }} </div>
        <plex-label titulo="Fecha de nacimiento" subtitulo="{{profesional.fechaNacimiento | fecha}}"></plex-label>
        <plex-label titulo="Edad" subtitulo="{{profesional | edad}}"></plex-label>
        <plex-label titulo="Sexo" subtitulo="{{profesional.sexo}}"></plex-label>
        <plex-label titulo="CUIT" subtitulo="{{profesional.cuit}}"></plex-label>
        <plex-label titulo="Naciolalidad" subtitulo="{{profesional.nacionalidad.nombre}}"></plex-label>
    </plex-detail>
    <plex-title titulo="Notas" size="md">
    </plex-title>
    <plex-label *ngIf="profesional.notas">{{profesional.notas[0]}}</plex-label>
    <plex-label *ngIf="!profesional.notas || profesional.notas[0]===''">Sin notas</plex-label>
    <br>
    <plex-title titulo="Posgrados" size="md">
    </plex-title>
    <plex-label *ngIf="!profesional.formacionPosgrado">Sin posgrado</plex-label>
    <plex-table *ngIf="profesional.formacionPosgrado" [columns]="columns" #table="plTable">
        <plex-table-columns>
        </plex-table-columns>
        <tr *ngFor="let posgrados of profesional.formacionPosgrado">
            <td>
                <plex-label titulo="{{posgrados.especialidad.nombre}}" subtitulo="{{posgrados.profesion.nombre}}">
                </plex-label>
            </td>
            <td>
                <plex-label titulo="{{posgrados.matriculacion[posgrados.matriculacion.length-1].matriculaNumero}}">
                </plex-label>
            </td>
            <td>
                <plex-badge *ngIf="posgrados.matriculacion.length && !posgrados.revalida && posgrados.tieneVencimiento && hoy > posgrados.matriculacion[posgrados.matriculacion.length-1].fin"
                            type="{{((hoy.getTime() - posgrados.matriculacion[posgrados.matriculacion.length-1].fin.getTime())/(1000 * 3600 * 24) > 365)?'danger':'info'}}">
                    {{((hoy.getTime() -
                    posgrados.matriculacion[posgrados.matriculacion.length-1].fin.getTime())/(1000 *
                    3600
                    *24) > 365)?'Vencida':'AÃ±o de gracia'}}
                </plex-badge>

                <plex-badge *ngIf="posgrados.matriculacion.length && !posgrados.revalida && posgrados.tieneVencimiento &&
                    posgrados.matriculado && hoy <= posgrados.matriculacion[posgrados.matriculacion.length-1].fin"
                            type="success"> vigente
                </plex-badge>

                <plex-badge *ngIf="posgrados.matriculacion.length && !posgrados.revalida && posgrados.tieneVencimiento && 
                    !posgrados.matriculado" type="danger"> Suspendida
                </plex-badge>

                <plex-badge *ngIf='posgrados.matriculacion.length  && posgrados.revalida && posgrados.tieneVencimiento'
                            type="{{posgrados.papelesVerificados?'info':'warning'}}">
                    {{posgrados.papelesVerificados?'Papeles verificados': 'Papeles sin verificar'}}
                </plex-badge>

                <plex-badge *ngIf='!posgrados.tieneVencimiento' type="warning">
                    Sin vencimiento
                </plex-badge>
            </td>
        </tr>
    </plex-table>
</plex-box>